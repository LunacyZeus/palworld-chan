var d=(a,r,e)=>new Promise((c,u)=>{var s=t=>{try{i(e.next(t))}catch(l){u(l)}},p=t=>{try{i(e.throw(t))}catch(l){u(l)}},i=t=>t.done?c(t.value):Promise.resolve(t.value).then(s,p);i((e=e.apply(a,r)).next())});import{at as E,au as b,d as w,W as C,av as y,r as g,Y as S,y as U,b as m,C as T,Z as h,_ as x,b7 as A,a0 as G,D as k,F as M,G as N,z as R,U as $}from"./e1cebf43.js";import{F as z}from"./ec1069cb.js";import{A as I}from"./cd8c2c82.js";import{C as P}from"./ff51593b.js";import{C as V}from"./926c5ea7.js";import{c as W}from"./6428a56b.js";import{_ as Y}from"./cff6a0f4.js";import{_ as Z}from"./0ee26181.js";import"./e28c11a8.js";import"./1484675b.js";import"./cdbaf723.js";const j=E({id:"backUp",state:()=>({result:"",error:"",backUpList:[]}),getters:{getResult(){return this.result||""},getError(){return this.error||""},getBackUpList(){return this.backUpList||[]}},actions:{setBackUpList(a){this.backUpList=a},GetBackUpListData(){return d(this,null,function*(){return new Promise((a,r)=>{W().then(e=>{const c=e.message||null;(e.code||404)==200?this.setBackUpList(e.result||{}):this.error=c,a(e)}).catch(e=>{this.error=e,r(e)})})})}}});function q(){return j(b)}const H={class:"page_content"},J=w({__name:"BackUpManager",setup(a){const r=C(),e=q(),{getBackUpList:c}=y(e);var u=c;const s=g(!1),p=g(""),i=[{name:"\u4E0B\u8F7D"},{name:"\u5220\u9664",disabled:!0}],t=o=>{if(s.value=!1,o.name=="\u4E0B\u8F7D"){o.name;let _=r.getToken;window.location.href="/api/backUpList/download?fileName="+p.value+"&token="+_}else o.name=="\u5220\u9664"&&h("\u672A\u5B9E\u88C5")},l=o=>{s.value=!0,p.value=o},f=()=>d(this,null,function*(){x({duration:0,message:"\u52A0\u8F7D\u6570\u636E\u4E2D...",loadingType:"spinner"}),yield e.GetBackUpListData(),A(),e.getBackUpList?G("\u52A0\u8F7D\u5907\u4EFD\u6570\u636E\u6210\u529F"):e.getError&&(console.error("Failed load backUp:",e.getError),h("\u52A0\u8F7D\u5907\u4EFD\u6570\u636E\u5931\u8D25: "+e.getError))}),B=()=>{f()};return S(()=>{f()}),(o,_)=>{const v=V,L=P,F=I,D=z;return k(),U("div",H,[m(Y),m(L,{inset:"",title:"\u672C\u5730\u5907\u4EFD"},{default:T(()=>[(k(!0),U(M,null,N($(u),n=>(k(),R(v,{key:n.name,title:n.name,value:n.created,onClick:K=>l(n.name)},null,8,["title","value","onClick"]))),128))]),_:1}),m(F,{show:s.value,"onUpdate:show":_[0]||(_[0]=n=>s.value=n),actions:i,onSelect:t,"cancel-text":"\u53D6\u6D88",description:"\u4E0B\u8F7D\u5907\u4EFD"},null,8,["show"]),m(D,{icon:"replay",onClick:B})])}}});const ie=Z(J,[["__scopeId","data-v-93ea9006"]]);export{ie as default};
