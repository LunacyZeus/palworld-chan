var m=(s,t,e)=>new Promise((u,o)=>{var l=a=>{try{i(e.next(a))}catch(n){o(n)}},_=a=>{try{i(e.throw(a))}catch(n){o(n)}},i=a=>a.done?u(a.value):Promise.resolve(a.value).then(l,_);i((e=e.apply(s,t)).next())});import{at as E,au as L,d as b,av as w,r as k,Y as C,y as g,b as p,C as y,Z as h,_ as x,b7 as A,a0 as S,D as d,F as T,G,z as M,U as N}from"./523c87a6.js";import{F as R}from"./48dec966.js";import{A as $}from"./82ddb223.js";import{C as z}from"./b768bcbe.js";import{C as I}from"./66ae4cf9.js";import{c as P}from"./b767ae13.js";import{_ as V}from"./7ba30f6b.js";import{_ as Y}from"./0ee26181.js";import"./83258687.js";import"./c5a85ffc.js";import"./e24444af.js";const Z=E({id:"form",state:()=>({result:"",error:"",backUpList:[]}),getters:{getResult(){return this.result||""},getError(){return this.error||""},getBackUpList(){return this.backUpList||[]}},actions:{setBackUpList(s){this.backUpList=s},GetData(){return m(this,null,function*(){return new Promise((s,t)=>{P().then(e=>{const u=e.message||null;(e.code||404)==200?this.setBackUpList(e.result||{}):this.error=u,s(e)}).catch(e=>{this.error=e,t(e)})})})}}});function j(){return Z(L)}const q={class:"page_content"},H=b({__name:"BackUpManager",setup(s){const t=j(),{getBackUpList:e}=w(t);var u=e;const o=k(!1),l=k(""),_=[{name:"\u4E0B\u8F7D"},{name:"\u5220\u9664",disabled:!0}],i=r=>{o.value=!1,r.name=="\u4E0B\u8F7D"?(r.name,window.location.href="/api/backUpList/download?fileName="+l.value):r.name=="\u5220\u9664"&&h("\u672A\u5B9E\u88C5")},a=r=>{o.value=!0,l.value=r},n=()=>m(this,null,function*(){x({duration:0,message:"\u52A0\u8F7D\u6570\u636E\u4E2D...",loadingType:"spinner"}),yield t.GetData(),A(),t.getBackUpList?S("\u52A0\u8F7D\u5907\u4EFD\u6570\u636E\u6210\u529F"):t.getError&&(console.error("Failed load backUp:",t.getError),h("\u52A0\u8F7D\u5907\u4EFD\u6570\u636E\u5931\u8D25: "+t.getError))}),U=()=>{n()};return C(()=>{n()}),(r,f)=>{const v=I,B=z,F=$,D=R;return d(),g("div",q,[p(V),p(B,{inset:"",title:"\u672C\u5730\u5907\u4EFD"},{default:y(()=>[(d(!0),g(T,null,G(N(u),c=>(d(),M(v,{key:c.name,title:c.name,value:c.created,onClick:J=>a(c.name)},null,8,["title","value","onClick"]))),128))]),_:1}),p(F,{show:o.value,"onUpdate:show":f[0]||(f[0]=c=>o.value=c),actions:_,onSelect:i,"cancel-text":"\u53D6\u6D88",description:"\u4E0B\u8F7D\u5907\u4EFD"},null,8,["show"]),p(D,{icon:"replay",onClick:U})])}}});const ce=Y(H,[["__scopeId","data-v-df988e2e"]]);export{ce as default};
