var m=(o,t,e)=>new Promise((u,s)=>{var l=a=>{try{i(e.next(a))}catch(n){s(n)}},_=a=>{try{i(e.throw(a))}catch(n){s(n)}},i=a=>a.done?u(a.value):Promise.resolve(a.value).then(l,_);i((e=e.apply(o,t)).next())});import{at as F,au as D,d as E,av as w,r as k,Y as C,y as g,b as p,C as y,Z as U,_ as x,b7 as A,a0 as S,D as d,F as T,G,z as M,U as N}from"./b076ca58.js";import{F as R}from"./178d9793.js";import{A as $}from"./ef387aa7.js";import{C as z}from"./c8fbe4b5.js";import{C as I}from"./69494692.js";import{c as P}from"./50acde83.js";import{_ as V}from"./f443bb44.js";import{_ as Y}from"./0ee26181.js";import"./5e81b49d.js";import"./443596ad.js";import"./24c18045.js";const Z=F({id:"backUp",state:()=>({result:"",error:"",backUpList:[]}),getters:{getResult(){return this.result||""},getError(){return this.error||""},getBackUpList(){return this.backUpList||[]}},actions:{setBackUpList(o){this.backUpList=o},GetBackUpListData(){return m(this,null,function*(){return new Promise((o,t)=>{P().then(e=>{const u=e.message||null;(e.code||404)==200?this.setBackUpList(e.result||{}):this.error=u,o(e)}).catch(e=>{this.error=e,t(e)})})})}}});function j(){return Z(D)}const q={class:"page_content"},H=E({__name:"BackUpManager",setup(o){const t=j(),{getBackUpList:e}=w(t);var u=e;const s=k(!1),l=k(""),_=[{name:"\u4E0B\u8F7D"},{name:"\u5220\u9664",disabled:!0}],i=r=>{s.value=!1,r.name=="\u4E0B\u8F7D"?(r.name,window.location.href="/api/backUpList/download?fileName="+l.value):r.name=="\u5220\u9664"&&U("\u672A\u5B9E\u88C5")},a=r=>{s.value=!0,l.value=r},n=()=>m(this,null,function*(){x({duration:0,message:"\u52A0\u8F7D\u6570\u636E\u4E2D...",loadingType:"spinner"}),yield t.GetBackUpListData(),A(),t.getBackUpList?S("\u52A0\u8F7D\u5907\u4EFD\u6570\u636E\u6210\u529F"):t.getError&&(console.error("Failed load backUp:",t.getError),U("\u52A0\u8F7D\u5907\u4EFD\u6570\u636E\u5931\u8D25: "+t.getError))}),h=()=>{n()};return C(()=>{n()}),(r,f)=>{const B=I,v=z,L=$,b=R;return d(),g("div",q,[p(V),p(v,{inset:"",title:"\u672C\u5730\u5907\u4EFD"},{default:y(()=>[(d(!0),g(T,null,G(N(u),c=>(d(),M(B,{key:c.name,title:c.name,value:c.created,onClick:J=>a(c.name)},null,8,["title","value","onClick"]))),128))]),_:1}),p(L,{show:s.value,"onUpdate:show":f[0]||(f[0]=c=>s.value=c),actions:_,onSelect:i,"cancel-text":"\u53D6\u6D88",description:"\u4E0B\u8F7D\u5907\u4EFD"},null,8,["show"]),p(b,{icon:"replay",onClick:h})])}}});const ce=Y(H,[["__scopeId","data-v-07c4b169"]]);export{ce as default};
